<div class="facet" ng-repeat="(id, facet) in vm.facets">
  <div class="facet-name">
    {{ ::facet.name }}
    <img src="images/loading-sm.gif" ng-if="vm.isLoadingFacets"></img>
  </div>
  <div ng-if="::!facet.type">
    <select
      ng-change="vm.changed(id)"
      ng-disabled="vm.isDisabled()"
      size="{{ vm.getFacetSize(facet.state.values) }}"
      id="{{ ::facet.name + '_select' }}"
      class="selector form-control"
      ng-options="value as (value.text + ' (' + value.count + ')') for value in facet.state.values track by value.value"
      ng-model="vm.selectedFacets[id]">
    </select>
  </div>
  <div ng-if="::facet.type === 'text'">
    <input type="text"
      ng-change="vm.changed(id)"
      ng-disabled="vm.isDisabled()"
      ng-model="vm.selectedFacets[id].value"
      ng-model-options="{ debounce: 1000 }">
    </input>
  </div>
  <div ng-if="::facet.type === 'timespan'">
    <input type="text"
      ng-change="vm.changed(id)"
      ng-disabled="vm.isDisabled()"
      ng-model="vm.selectedFacets[id].value.start"
      ng-model-options="{ debounce: 1000 }">
    </input>
    <input type="text"
      ng-change="vm.changed(id)"
      ng-disabled="vm.isDisabled()"
      ng-model="vm.selectedFacets[id].value.end"
      ng-model-options="{ debounce: 1000 }">
    </input>
  </div>
</div>
